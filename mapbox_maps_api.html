<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- --------------------Mapbox GL JS--------------------------- -->

    <script src='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.js'></script>
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.2.0/mapbox-gl.css' rel='stylesheet' />

    <title>Mapbox Maps API</title>
</head>
<body>
    <h1>My First Map!</h1>
    <div id="mapbox"></div>


    <!-- ---------------------Mapbox CDN----------------------------- -->

    <div id='map' style='width: 600px; height: 600px;'></div>
    <script src="js/mapbox-geocoder-utils.js"></script>
    <script src = js/keys.js></script>

    <script>

        // Creates a map
        mapboxgl.accessToken = mapToken;
        var map = new mapboxgl.Map({
            container: 'map', // container ID
            style: 'mapbox://styles/mapbox/streets-v11', // style URL
            center: [-98.48717, 29.42302], // starting position [lng, lat]
            zoom:12 // starting zoom
        });
        // // Create marker
        // var marker = new mapboxgl.Marker()
        //     .setLngLat([-98.48717, 29.42302])
        //     .addTo(map);
        //
        // // Create Marker and Set options
        // var marker = new mapboxgl.Marker({
        //     color: "coral",
        //     draggable: true
        // }).setLngLat([-98.48717, 29.42302])
        //     .addTo(map);
        //
        // // Create popup for marker
        // var fritePopup = new mapboxgl.Popup()
        //     .setHTML("<p>La Frite</p>")
        //     .addTo(map)
        //
        // marker.setPopup(fritePopup)

        // Create geocode
        geocode("728 S. Alamo, San Antonio, TX 78205", mapToken).then(function(result) {

            map.setZoom(11);

            var marker = new mapboxgl.Marker({
                color: "coral"
            })
            .setLngLat(result)
            .addTo(map);

            var fritePopup = new mapboxgl.Popup()
            .setHTML("<p>La Frite, my top favorite!</p>")

            marker.setPopup(fritePopup)
        });

        var favRestaurants = [
            {
                name: "John the Greek",
                type: "Greek",
                features: ["Baklava", " Gyros", " Soups"],
            },
            {
                name: "Raisin Cane's",
                type: "Fast Food",
                features: ["Chicken strips", " Fries", " Arnold Palmer"]
            },
            {
                name: "Blanco Cafe",
                type: "Mexican",
                features: ["Tacos", " Menudo", " Pastries"]
            }
        ];



        favRestaurants.forEach(function() {
            favRestaurants.features.forEach(function(feature) {
                console.log(feature);
            });
        });



        geocode("16602 San Pedro Ave, San Antonio, TX 78232", mapToken).then(function(result) {
            console.log(result);
            map.setZoom(9);

            var marker = new mapboxgl.Marker({
                color: "coral"
            })
                .setLngLat(result)
                .addTo(map);

            var johnPopup = new mapboxgl.Popup()
                .setHTML(favRestaurants[0].name + ":  " + favRestaurants[0].features)
            marker.setPopup(johnPopup)
        });

        geocode("106 St Cloud, San Antonio, TX 78228", mapToken).then(function(result) {
            console.log(result);
            map.setZoom(9);

            var marker = new mapboxgl.Marker({
                color: "coral"
            })
                .setLngLat(result)
                .addTo(map);

            var canesPopup = new mapboxgl.Popup()
                .setHTML(favRestaurants[1].name + ":  " + favRestaurants[1].features)
            marker.setPopup(canesPopup)
        });

        geocode("7934 Fredericksburg Rd, San Antonio, TX 78229", mapToken).then(function(result) {
            console.log(result);
            map.setZoom(9);

            var marker = new mapboxgl.Marker({
                color: "coral"
            })
                .setLngLat(result)
                .addTo(map);

            var blancoPopup = new mapboxgl.Popup()
                .setHTML(favRestaurants[2].name + ":  " + favRestaurants[2].features)
            marker.setPopup(blancoPopup)
        });

        // console.log("My first favorite restuarant is " + favRestaurants[0].name + " and serves " + favRestaurants[0].type + " food. Favorite items are " + favRestaurants[0].features);
        // console.log("My second favorite restuarant is " + favRestaurants[1].name + " and serves " + favRestaurants[1].type + " food. Favorite items are " + favRestaurants[1].features);
        // console.log("My third favorite restuarant is " + favRestaurants[2].name + " and serves " + favRestaurants[2].type + " food. Favorite items are " + favRestaurants[2].features);




    </script>
</body>
</html>

<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <title>Geocode Examples</title>-->
<!--    &lt;!&ndash; Mapbox CSS &ndash;&gt;-->
<!--    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.css' rel='stylesheet' />-->
<!--    &lt;!&ndash; Custom CSS &ndash;&gt;-->
<!--    <style>-->
<!--        #map {-->
<!--            /* the width and height may be set to any size */-->
<!--            width: 100%;-->
<!--            height: 700px;-->
<!--        }-->
<!--    </style>-->
<!--</head>-->
<!--<body>-->

<!--<h1>My First Mapbox Map!</h1>-->
<!--<select id="zoom-select">-->
<!--    <option selected disabled>Zoom Level</option>-->
<!--    <option value="5">Zoom Level 5</option>-->
<!--    <option value="9">Zoom Level 9</option>-->
<!--    <option value="15">Zoom Level 15</option>-->
<!--    <option value="20">Zoom Level 20</option>-->
<!--</select>-->
<!--&lt;!&ndash; The HTML element that serves as the Mapbox container &ndash;&gt;-->
<!--<div id='map'></div>-->
<!--<script src="js/keys.js"></script>-->
<!--<script src="https://code.jquery.com/jquery-2.2.4.js"-->
<!--        integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="-->
<!--        crossorigin="anonymous"></script>-->
<!--&lt;!&ndash; Mapbox JS &ndash;&gt;-->
<!--<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.53.0/mapbox-gl.js'></script>-->

<!--&lt;!&ndash; Mapbox Geocoder Util Methods &ndash;&gt;-->
<!--<script src="js/mapbox-geocoder-utils.js"></script>-->

<!--&lt;!&ndash; Custom JS &ndash;&gt;-->
<!--<script>-->
<!--    mapboxgl.accessToken = mapboxToken;-->
<!--    var map = new mapboxgl.Map({-->
<!--        container: 'map',-->
<!--        style: 'mapbox://styles/mapbox/streets-v9',-->
<!--        zoom: 9,-->
<!--        center: [-96.798685, 32.781214]-->
<!--    });-->

<!--    var restaurantArray = [-->
<!--        {-->
<!--            address: "4350 Belt Line Rd, Addison, TX 75001",-->
<!--            popupHTML: "<p>Osaka Sushi Grill<br>4350 Belt Line Rd, Addison, TX 75001</p>"-->
<!--        },-->
<!--        {-->
<!--            address: "8580 TX-121, Frisco, TX 75034",-->
<!--            popupHTML: "<p>Buca di Beppo Italian Restaurant<br>8580 TX-121, Frisco, TX 75034</p>"-->
<!--        },-->
<!--        {-->
<!--            address: "1520 Elm St #111, Dallas, TX 75201",-->
<!--            popupHTML: "<p>Campisi's Restaurants | Downtown Dallas<br>1520 Elm St #111, Dallas, TX 75201</p>"-->
<!--        },-->
<!--        {-->
<!--            address: "944 E Copeland Rd, Arlington, TX 76011",-->
<!--            popupHTML: "<p>Asian Buffet<br>944 E Copeland Rd, Arlington, TX 76011</p>"-->
<!--        },-->
<!--        {-->
<!--            address: "3726 Towne Crossing Blvd, Mesquite, TX 75150",-->
<!--            popupHTML: "<p>Snuffer's<div class='best'>Home of the best Cheese Fries</div>3726 Towne Crossing Blvd, Mesquite, TX 75150</p>"-->
<!--        }-->
<!--    ];-->

<!--    restaurantArray.forEach(function(restaurant) {-->
<!--        geocode(restaurant.address, mapboxToken).then(function(result) {-->
<!--            console.log(result);-->

<!--            var marker = new mapboxgl.Marker()-->
<!--                .setLngLat(result)-->
<!--                .addTo(map);-->

<!--            var popupHTML = restaurant.popupHTML;-->

<!--            var popup = new mapboxgl.Popup().setHTML(popupHTML);-->

<!--            marker.setPopup(popup);-->
<!--        });-->
<!--    });-->

<!--    var zoomSelect = document.getElementById("zoom-select");-->

<!--    //Vanilla JS-->
<!--    // zoomSelect.addEventListener('change', function(){-->
<!--    //     var zoomValue = zoomSelect.options[zoomSelect.selectedIndex].value;-->
<!--    //     console.log(zoomValue);-->
<!--    //     map.setZoom(zoomValue);-->
<!--    // });-->

<!--    //jQuery-->
<!--    $('#zoom-select').change(function(e){-->
<!--        console.log(e.target.value);-->
<!--        map.setZoom(e.target.value);-->
<!--    });-->

<!--    // the  geocode method from mapbox-geocoder-utils.js-->
<!--    // geocode("4350 Belt Line Rd, Addison, TX 75001", mapboxToken).then(function(result) {-->
<!--    //     console.log(result);-->
<!--    //-->
<!--    //     var marker = new mapboxgl.Marker()-->
<!--    //         .setLngLat(result)-->
<!--    //         .addTo(map);-->
<!--    //-->
<!--    //     var popupHTML = "<p>Osaka Sushi Grill<br>4350 Belt Line Rd, Addison, TX 75001</p>";-->
<!--    //-->
<!--    //     var popup = new mapboxgl.Popup().setHTML(popupHTML);-->
<!--    //-->
<!--    //     marker.setPopup(popup);-->
<!--    // });-->

<!--</script>-->
<!--</body>-->
<!--</html>-->